# LionTime

---

## ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ì†Œê°œ](#í”„ë¡œì íŠ¸-ì†Œê°œ)
2. [ë°°í¬ ë§í¬](#ë°°í¬-ë§í¬)
3. [ì‚¬ìš© ê¸°ìˆ ](#ì‚¬ìš©-ê¸°ìˆ )
4. [ë¦¬íŒ©í† ë§](#ë¦¬íŒ©í† ë§)

---

## í”„ë¡œì íŠ¸ ì†Œê°œ

LionTimeì€ ì†Œì‹ì„ ê³µìœ í•˜ê³  ë¬¼í’ˆì„ íŒë§¤í•  ìˆ˜ ìˆëŠ” SNS ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.  
[ê¸°ì¡´ì˜ íŒ€ í”„ë¡œì íŠ¸](https://github.com/LikeLion-FES-Team11/LionTime)ë¥¼ `webpack`ê³¼ `AWS`ë¥¼ í™œìš©í•´ ë¦¬íŒ©í† ë§ í•œ ê°œì¸ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.

<br/>

## ë°°í¬ ë§í¬

<a href='https://liontime.shop' target='_blank'>https://liontime.shop</a>

**í…ŒìŠ¤íŠ¸ ê³„ì • ì •ë³´**

- ì•„ì´ë””: lady@gaga.com
- ë¹„ë°€ë²ˆí˜¸ : ladygaga

â— ë¡œê·¸ì¸ í™”ë©´ì—ì„œ `ì´ë©”ì¼ë¡œ ë¡œê·¸ì¸` ë°©ì‹ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.

<br />

## ì‚¬ìš© ê¸°ìˆ 

<p>
<!-- HTML -->
<img src= "https://img.shields.io/badge/html5-E34F26?style=for-the-badge&logo=html5&logoColor=white">
<!-- CSS -->
<img src= "https://img.shields.io/badge/css3-1572B6?style=for-the-badge&logo=css3&logoColor=white">
<!-- CSS Modules-->
<img src= "https://img.shields.io/badge/css modules-000000?style=for-the-badge&logo=cssmodules&logoColor=white">
<!-- JavasScript -->
<img src= "https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black">
<br />
<!-- Webpack -->
<img src= "https://img.shields.io/badge/webpack-8DD6F9?style=for-the-badge&logo=webpack&logoColor=black">
<!-- Babel -->
<img src= "https://img.shields.io/badge/babel-F9DC3E?style=for-the-badge&logo=babel&logoColor=black">
<!-- Github Actions -->
<img src= "https://img.shields.io/badge/github actions-2088FF?style=for-the-badge&logo=githubactions&logoColor=white">
<br />
<!-- S3 -->
<img src= "https://img.shields.io/badge/s3-569A31?style=for-the-badge&logo=amazons3&logoColor=white">
<!-- CloudFront -->
<img src= "https://img.shields.io/badge/cloud front-915AEF?style=for-the-badge&logo=&logoColor=white">
<!-- LAMBDA -->
<img src= "https://img.shields.io/badge/lambda-FF9900?style=for-the-badge&logo=aws lambda&logoColor=white">

<br />

## ë¦¬íŒ©í† ë§

### ê²°ê³¼ ì§€í‘œ

#### Lighthouse

<table>
    <tr>
        <td style='font-weight:bold; text-align:center'>ë¦¬íŒ©í† ë§ ì „</td>
        <td style='font-weight:bold; text-align:center'>ë¦¬íŒ©í† ë§ í›„</td>
    </tr>
    <tr>
        <td>
            <img src='./readme-assets/lighthouse-before.png' />
        </td>
        <td>
            <img src='./readme-assets/lighthouse-after.png' />
        </td>
    </tr>
</table>

#### ë„¤íŠ¸ì›Œí¬ (ë¹ ë¥¸ 3G ê¸°ì¤€)

**ë¦¬íŒ©í† ë§ ì „**

<div>
    <img src='./readme-assets/network-before.png' width='100%' />  
</div>

**ë¦¬íŒ©í† ë§ í›„**

<div>
    <img src='./readme-assets/network-after.png' width='100%' />
</div>

### ê°œì„  ì‚¬í•­

#### ìµœì í™”ë¥¼ ìœ„í•œ ì„¤ê³„

<img src='./readme-assets/liontime-architecture.png' width='100%' />

- ë¬¸ì œ: í˜ì´ì§€ ë¦¬ì†ŒìŠ¤(CSS, JS, í°íŠ¸)ì— ìºì‹±ì´ ì ìš©ë˜ì–´ ìˆì§€ ì•ŠìŒ
  - í•´ê²°: cache-control ì„¤ì •ìœ¼ë¡œ ë¸Œë¼ìš°ì €ì—ì„œ ìºì‹±í•˜ë„ë¡ í•¨
- ë¬¸ì œ: ì´ë¯¸ì§€ í¬ê¸°ê°€ ë¶ˆí•„ìš”í•˜ê²Œ í¬ê³  ì°¨ì„¸ëŒ€ í˜•ì‹(webp)ì´ ì•„ë‹˜
  - í•´ê²°: ì´ë¯¸ì§€ ì„œë²„ë¥¼ êµ¬ì¶•í•´ì„œ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ìœ¼ë¡œ ë„˜ì–´ì˜¨ ì´ë¯¸ì§€ ì‚¬ì´ì¦ˆì— ë§ê²Œ ë¦¬ì‚¬ì´ì§• ë° webpë¡œ ë³€í™˜í•œ ë’¤ ë¸Œë¼ìš°ì €ì—ì„œ ìºì‹±í•˜ë„ë¡ í•¨

#### CI/CD

`github actions`ë¡œ ë¹Œë“œ, S3 ì—…ë¡œë“œ, CloudFront ìºì‹œ ì´ˆê¸°í™”ë¥¼ ìë™í™”

#### ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…

ì‚¬ìš©ìì™€ì˜ ìƒí˜¸ì‘ìš©ì´ ìˆì–´ì•¼ í•„ìš”í•´ì§€ëŠ” `BottomSheet`ì™€ `Dialog` ì»´í¬ë„ŒíŠ¸ì— ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…ì„ ì ìš©í•¨ìœ¼ë¡œì¨ ì´ˆê¸°ì— ë¡œë“œí•´ì•¼ í•  ìŠ¤í¬ë¦½íŠ¸ì˜ ìš©ëŸ‰ ê°ì†Œ

```js
const module = await import(
  /* webpackChunkName: "BottomSheet" */ '@components/BottomSheet'
);
BottomSheet = module.default;

import(/* webpackChunkName: "ConfirmDialog" */ '../ConfirmDialog').then(
  ({ default: ConfirmDialog }) =>
    new ConfirmDialog({ action, postId, commentId, productId }).open(),
);
```

#### ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ í™œìš©

- ë¬´í•œ ìŠ¤í¬ë¡¤ì´ í•„ìš”í•œ í˜ì´ì§€ì—ì„œ ê´€ë ¨ ë¡œì§ì„ ì „ë¶€ ì‘ì„±í•œ ì´ì „ ì½”ë“œì™€ ë‹¬ë¦¬ ê´€ë ¨ ë¡œì§ì„ ì¶”ìƒí™”
- target ìš”ì†Œê°€ ë·°í¬íŠ¸ì— ë“¤ì–´ì™”ì„ ë•Œ `intersect`ë¼ëŠ” ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ë¥¼ ë°œí–‰í•´ì„œ
  ì½œë°± í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•¨

```js
function intersectionObserver(target) {
  const intersectEvent = new CustomEvent('intersect');

  function handleIntersect(entries, observer) {
    entries.forEach((entry) => {
      if (entry.isIntersecting) {
        observer.unobserve(entry.target);
        target.dispatchEvent(intersectEvent);
      }
    });
  }

  const observer = new IntersectionObserver(handleIntersect);

  return observer;
}

// ìœ ì¦ˆì¼€ì´ìŠ¤
const feedList = document.querySelector('.feed-list');
const feedListObserver = intersectionObserver(feedList);
feedList.addEventListener('intersect', printFeed);
feedListObserver.observe(feedList.lastChild);
```

#### ì´ë¯¸ì§€ ì»´í¬ë„ŒíŠ¸

- ì»´í¬ë„ŒíŠ¸ì™€ í˜ì´ì§€ë¥¼ ê°€ë¦¬ì§€ ì•Šê³  ìì£¼ ì‚¬ìš©ë˜ëŠ” `<img>` íƒœê·¸ë¥¼ ì»´í¬ë„ŒíŠ¸í™”
- `width`ì™€ `height` ë„˜ê²¨ì„œ `lambda@edge`ë¡œ ë¦¬ì‚¬ì´ì¦ˆ í•œ ì´ë¯¸ì§€ ë¡œë“œ
- í˜ì´ì§€ ë¡œë“œì‹œ ë…¸ì¶œë˜ì§€ ì•ŠëŠ”(below the fold) ì´ë¯¸ì§€ëŠ” `shouldLazy`ì— `true`ë¥¼ ë„˜ê¸°ë„ë¡ í•¨ìœ¼ë¡œì¨ lazy-loading ì ìš©
- `fallback`ìœ¼ë¡œ í˜¹ì‹œ ëª¨ë¥¼ ì´ë¯¸ì§€ ë¡œë”© ì—ëŸ¬ì— ëŒ€ì²˜

```js
function Image({ src, width, height, alt, shouldLazy = false, fallback }) {
  const img = document.createElement('img');

  img.src = attachImageURL({ src, width, height });
  img.alt = alt;
  if (shouldLazy) img.setAttribute('loading', 'lazy');
  img.onerror = ({ target }) => {
    target.onerror = null;
    target.src = fallback;
  };

  return img;
}

// ìœ ì¦ˆì¼€ì´ìŠ¤
const img = Image({
  src: authorImg,
  alt: accountname,
  shouldLazy: !isAboveTheFold,
  fallback: defaultProfileImageSmall,
  ...IMAGE.size.user.sm,
});
```

#### ìŠ¤í¬ë¡¤ ê³ ì •

`BottomSheet`ë‚˜ `Dialog` ì°½ì´ ë– ìˆì„ ë•Œ ìŠ¤í¬ë¡¤ì„ ë§‰ì•„ì£¼ëŠ” ê¸°ëŠ¥ì„ í´ë¡œì ¸ë¥¼ í™œìš©í•´ êµ¬í˜„

```js
function useScrollFix(element) {
  let isFixed = false;

  function toggleScrollFix() {
    if (isFixed) {
      const scrollY = element.style.top;
      element.style = '';
      window.scrollTo(0, parseInt(scrollY || '0', 10) * -1);
      isFixed = false;
    } else {
      element.style = `
      width: 100%;
      top: -${window.scrollY}px;
      position: fixed;
      ${hasScroll(element, 'vertical') && 'overflow-y: scroll;'}
      `;
      isFixed = true;
    }
  }

  return toggleScrollFix;
}
```

#### ì…ë ¥ê°’ ê²€ì¦

ê°œë°œìê°€ ì…ë ¥ê°’ì˜ ê²€ì¦ì¡°ê±´ì„ íŒŒì•…í•˜ê¸° ì‰½ë„ë¡ í´ë˜ìŠ¤ì˜ ë©”ì„œë“œë¥¼ í™œìš©í•´ êµ¬í˜„

```js
class InputValidator {
  #validators = [];
  #isValid;
  #cause;

  required(cause) {
    this.#validators.push({
      validator: (target) => {
        if (!target) return false;
        return true;
      },
      cause,
    });

    return this;
  }

  number(cause) { ... }
  minLength(length, cause) { ... }
  maxLength(length, cause) { ... }
  match(regex, cause) { ... }
  notMatch(regex, cause) { ... }

  validate(target) {
    for (const { validator, cause } of this.#validators) {
      const isValid = validator(target);

      this.#isValid = isValid;
      this.#cause = isValid ? undefined : cause;
      if (!isValid) break;
    }

    return { isValid: this.#isValid, cause: this.#cause };
  }
}

// ìœ ì¦ˆì¼€ì´ìŠ¤
const nameValidator = new InputValidator()
  .required(PRODUCT_ERROR.nameRequired)
  .minLength(2, PRODUCT_ERROR.nameMinLength)
  .maxLength(15, PRODUCT_ERROR.nameMaxLength);

const { isValid, cause } = nameValidator.validate(name);
```

[ğŸ”º ëª©ì°¨ë¡œ ëŒì•„ê°€ê¸°](#ëª©ì°¨)
